window.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".tabs-header__item"),a=document.querySelectorAll(".tabs-content"),e=document.querySelector(".tabs-header__list");function o(){a.forEach(e=>{e.classList.add("hide"),e.classList.remove("show","fade")}),t.forEach(e=>{e.classList.remove("tabs-header__item--active")})}function s(e=0){a[e].classList.add("show","fade"),a[e].classList.remove("hide"),t[e].classList.add("tabs-header__item--active")}o(),s(),e.addEventListener("click",e=>{const a=e.target;a&&a.classList.contains("tabs-header__item")&&t.forEach((e,t)=>{a==e&&(o(),s(t))})});new Swiper(".swiper",{loop:!0,speed:500,spaceBetween:100,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!1},autoplay:{delay:5e3}});class n{constructor(e="img/lorem/test.jpg",t="test",a="Lorem ipsum",o="Lorem ipsum dolor sit amet consectetur adipisicing elit. Placeat illo voluptatum corporis obcaecati magni repellendus.",s=10,n=".menu .menu__inner",...r){this.src=e,this.alt=t,this.title=a,this.descr=o,this.price=s,this.parent=document.querySelector(n),this.classes=r,this.transfer=60}render(){const t=document.createElement("div");0===this.classes.length?(this.element="menu__item",t.classList.add(this.element)):this.classes.forEach(e=>t.classList.add(e)),t.innerHTML=`
        <img src="${this.src}" alt="${this.alt}">
        <h3 class="menu__item-title">${this.title}</h3>
        <div class="menu__item-text">${this.descr}</div>
        <div class="menu__item-price">
          <div class="menu__item-cost">
            Cost:
          </div>
          <a class="menu__item-total" href="#">
            <span>${this.price}</span> USD/day
          </a>
        </div>
      `,this.parent.append(t)}}new n("images/menu/1.jpg","vegy","Menu 'Fitness'","Menu 'Fitness' is a new approach to cooking: more fresh vegetables and fruits. Product of active and healthy people. This is a brand new product with the best price and high quality!",10).render(),new n("images/menu/2.jpg","post","Menu 'Lenten'","The 'Lenten' menu is a careful selection of ingredients: the complete absence of animal products, milk from almonds, oats, coconut or buckwheat, the right amount of protein from tofu and imported vegetarian steaks.",14).render(),new n("images/menu/3.jpg","elite","Menu 'Premium'","In the 'Premium' menu, we use not only beautiful packaging design, but also high-quality execution of dishes. Red fish, seafood, fruits - a restaurant menu without going to a restaurant!",20).render();const r=document.querySelector(".modal"),c=document.querySelector("[data-modal]");function i(){r.classList.remove("show-modal"),r.classList.add("hide"),document.body.style.overflow=""}function l(){r.classList.remove("hide"),r.classList.add("show-modal"),r.classList.add("been-opened"),document.body.style.overflow="hidden",clearInterval(d)}c.addEventListener("click",l),r.addEventListener("click",e=>{e.target!==r&&""!==e.target.getAttribute("data-modal-close")||i()}),document.addEventListener("keydown",e=>{"Escape"===e.code&&r.classList.contains("show-modal")&&i()});const d=setTimeout(l,3e4);window.addEventListener("scroll",function e(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight&&!r.classList.contains("been-opened")&&(setTimeout(l,0),window.removeEventListener("scroll",e))});function u(e){return 0<=e&&e<10?"0"+e:e}{var m=".timer",$="2023-05-20";const T=document.querySelector(m),x=T.querySelector("#days"),D=T.querySelector("#hours"),j=T.querySelector("#minutes"),H=T.querySelector("#seconds"),C=setInterval(h,1e3);function h(){var e=function(e){let t,a,o,s;return(e=Date.parse(e)-Date.parse(new Date))<=0?(document.querySelectorAll(".timer__block").forEach(e=>{e.remove()}),document.querySelector(".timer").classList.add("timeisover"),document.querySelector(".timer").append("Акция завершена!")):(t=Math.floor(e/864e5),a=Math.floor(e/36e5%24),o=Math.floor(e/6e4%60),s=Math.floor(e/1e3%60)),{total:e,days:t,hours:a,minutes:o,seconds:s}}($);x.innerHTML=u(e.days),D.innerHTML=u(e.hours),j.innerHTML=u(e.minutes),H.innerHTML=u(e.seconds),e.total<=0&&clearInterval(C)}h()}m=document.querySelectorAll("form");m.forEach(e=>{e.addEventListener("change",()=>{var e=document.querySelectorAll('input[name="name"]'),t=document.querySelectorAll('input[name="phone"]');e.forEach(e=>{localStorage.setItem("name",e.value)}),t.forEach(e=>{localStorage.setItem("phone",e.value)})})}),window.addEventListener("load",()=>{var e=document.querySelectorAll('input[name="name"]'),t=document.querySelectorAll('input[name="phone"]');e.forEach(e=>{e.value=localStorage.getItem("name")||""}),t.forEach(e=>{e.value=localStorage.getItem("phone")||""})});const g={loading:"images/form/spin-onload.svg",success:"Thanks! <br> We will contact you soon",failure:"Error"},O=(m.forEach(e=>{var a;(a=e).addEventListener("submit",e=>{e.preventDefault();const t=document.createElement("img");t.src=g.loading,t.style.cssText=`
        display: block;
        margin: 15px auto 0;
      `,a.insertAdjacentElement("afterend",t);e=new FormData(a),e=JSON.stringify(Object.fromEntries(e.entries()));O("http://localhost:3000/requests",e).then(e=>{console.log(e),v(g.success),t.remove()}).catch(()=>{v(g.failure)}).finally(()=>{a.reset()})})}),async(e,t)=>{return(await fetch(e,{method:"POST",headers:{"Content-type":"application/json"},body:t})).json()});function v(e){const t=document.querySelector(".modal__dialog"),a=(t.classList.add("hide"),t.classList.remove("show"),l(),document.createElement("div"));a.classList.add("modal__dialog"),a.innerHTML=`
      <div class="modal__content">
        <div class="modal__close" data-modal-close>×</div>
        <div class="modal__title">${e}</div>
      </div>
    `,document.querySelector(".modal").append(a),setTimeout(()=>{a.remove(),t.classList.add("show"),t.classList.remove("hide"),i()},4e3)}const p=document.querySelector(".calc__total-result span");let f,y,L,_,S;function b(e,t){document.querySelectorAll(e).forEach(e=>{e.classList.remove(t),e.getAttribute("id")===localStorage.getItem("sex")&&e.classList.add(t),e.getAttribute("data-ratio")===localStorage.getItem("ratio")&&e.classList.add(t)})}function w(){f&&L&&_&&S&&y?"female"===f?p.textContent=Math.round((447.6+9.2*_+3.1*L-4.3*S)*y):p.textContent=Math.round((88.36+13.4*_+4.8*L-5.7*S)*y):p.textContent="Fill in all items"}function E(e,t){const a=document.querySelectorAll(e);a.forEach(e=>{e.addEventListener("click",e=>{e.target.getAttribute("data-ratio")?(y=+e.target.getAttribute("data-ratio"),localStorage.setItem("ratio",+e.target.getAttribute("data-ratio"))):(f=e.target.getAttribute("id"),localStorage.setItem("sex",e.target.getAttribute("id"))),a.forEach(e=>{e.classList.remove(t)}),e.target.classList.add(t),w()})})}function q(e){const t=document.querySelector(e);t.addEventListener("input",()=>{switch(t.value.match(/\D/g)?t.style.border="3px solid red":""==t.value?t.style.border="none":t.style.border="3px solid green",t.getAttribute("id")){case"height":L=+t.value;break;case"weight":_=+t.value;break;case"age":S=+t.value}w()})}localStorage.getItem("sex")?f=localStorage.getItem("sex"):(f="male",localStorage.setItem("sex","male")),localStorage.getItem("ratio")?y=localStorage.getItem("ratio"):(y=1.55,localStorage.setItem("ratio",1.55)),b("#gender div","calc__choose-item--active"),b(".calc__physical div","calc__choose-item--active"),E("#gender div","calc__choose-item--active"),E(".calc__physical div","calc__choose-item--active"),q("#height"),q("#weight"),q("#age");document.querySelector(".nav-modal");const k=document.querySelector(".nav-modal__container"),P=document.querySelector(".burger-menu");function A(){k.classList.add("hide"),k.classList.remove("show-nav-modal"),document.body.style.overflow=""}document.querySelector(".search-block svg").addEventListener("click",()=>{document.querySelector(".search-block__input").classList.add("show-input")}),P.addEventListener("click",function(){k.classList.add("show-nav-modal"),k.classList.remove("hide"),document.body.style.overflow="hidden"}),k.addEventListener("click",e=>{e.target!==k&&""!==e.target.getAttribute("data-burger-close")||A()});const F=document.querySelectorAll(".header__nav-item a"),B=document.querySelectorAll(".nav-modal__list-item a"),I=document.querySelectorAll("[data-scroll]");function M(e){window.scrollTo({top:e.offsetTop-75,behavior:"smooth"})}F.forEach((e,t)=>{e.addEventListener("click",e=>{e.preventDefault(),M(I[t])}),B[t].addEventListener("click",e=>{e.preventDefault(),M(I[t]),A()})})});